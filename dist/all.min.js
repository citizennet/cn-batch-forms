"use strict";!function(){angular.module("cn.batch-forms",["cn-flex-form","cn.util"])}(),function(){function e(e,t){function n(e,t,n){if(!n.length)return e;var a=o(e,t,n);return a.schema}function o(){return Object.create({constructor:a,createBatchField:r,processForm:c,processField:i,processDate:f,processHidden:l,processString:h,processSelect:u,getModelValues:s}).constructor()}function a(e,t,n){return this.schema=e,this.model=t,this.models=n,e.forms?e.forms.forEach(this.processForm):this.processForm(e.form),this}function c(e){for(var t=e.items.length;t;){var n=e.items[t-1];if(this.processField(n),n.batchConfig){var o=this.createBatchField(n);e.items.splice(t,0,o)}}}function i(n){if(!n.batchConfig)return void l(n);if(n.key){n.schema=n.schema||e.getSchema(n);var o=t.getFieldType(n),a=p[o];if(!a)return void this.processHidden(n);_.isObject(n.batchConfig)||(n.batchConfig={}),n.batchConfig.ogValues=this.getModelValues(n),a.bind(this)(n)}else n.items&&this.processForm(n)}function r(e){return{type:"radiobuttons",titleMap:e.batchConfig.titleMap,watch:{resolution:e.batchConfig.onSelect},key:"$$batch$$."+e.key,schema:{type:"string",title:"Edit Mode"}}}function s(t){return this.models.map(function(n){return e.parseExpression(t.key,n).get()})}function l(e){e.condition="false"}function h(e){e.batchConfig.titleMap=e.batchConfig.titleMap||[{name:"Replace",value:"replace"},{name:"Append",value:"push"}],1===_.uniq(e.batchConfig.ogValues).length?e.placeholder=_.first(e.batchConfig.ogValues):e.placeholder="—"}function u(t){var n=this,o=t.schema.type;"array"===o?(t.batchConfig.titleMap=t.batchConfig.titleMap||[{name:"Replace",value:"replace"},{name:"Append",value:"push"},{name:"Remove",value:"remove"}],t.batchConfig.onSelect={replace:function(o){"push"!==o&&e.parseExpression(t.key,n.model).set([])},push:function(o){"replace"!==o&&e.parseExpression(t.key,n.model).set([])},remove:function(){var o=_.chain(t.batchConfig.ogValues).flatten().uniq().value();e.parseExpression(t.key,n.model).set(o)}}):(t.batchConfig.titleMap=t.batchConfig.titleMap||[{name:"Replace",value:"replace"}],t.batchConfig.onSelect={replace:function(e){var n=_.first(t.batchConfig.ogValues);_.every(t.batchConfig.ogValues,n)?t.placeholder=n[t.displayProperty||"name"]:t.placeholder="—"}}),t.batchConfig.watch={resolution:function(e,n){t.batchConfig.onSelect[e](n)}}}function f(e){}var p={string:h,"cn-autocomplete":u,"cn-datetimepicker":f};return{augmentSchema:n}}angular.module("cn.batch-forms").factory("cnBatchForms",e),e.$inject=["cnFlexFormService","cnFlexFormTypes"]}();
//# sourceMappingURL=all.min.js.map
